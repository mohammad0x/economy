{% extends 'resistance/base.html' %}
{% block content %}
    <h1>جزئیات: {{ deprivation.name }}</h1>
    <div class="detail-view">
        <p><strong>نام و نام خانوادگی:</strong> {{ deprivation.name }}</p>
        <p><strong>کد ملی:</strong> {{ deprivation.nCode }}</p>
        <p><strong>نام پدر:</strong> {{ deprivation.fName }}</p>
        <p><strong>شماره تلفن:</strong> {{ deprivation.phone }}</p>
        <p><strong>کد گروه:</strong> {{ deprivation.cGroup }}</p>
        <p><strong>نام صندوق:</strong> {{ deprivation.fund_name|default:"-" }}</p>
    </div>
    <a href="{% url 'deprivation-update' deprivation.pk %}" class="btn">ویرایش</a>
    <a href="{% url 'deprivation-delete' deprivation.pk %}" class="btn btn-delete">حذف</a>
    <a href="{% url 'deprivation-list' %}" class="btn btn-secondary">بازگشت به لیست</a>
    <hr style="margin-top: 2rem;">
    <h3>گزارش‌های ثبت شده</h3>
    <a href="{% url 'report-create' deprivation.pk %}" class="btn">ثبت گزارش جدید</a>
    <table>
        <thead>
            <tr>
                <th>موضوع</th>
                <th>تاریخ</th>
                <th>تعداد اعضا</th>
                <th>عملیات</th>
            </tr>
        </thead>
        <tbody>
            {% for report in deprivation.report_set.all %}
            <tr>
                <td>{{ report.subject }}</td>
                <td>{{ report.date }}</td>
                <td>{{ report.member }}</td>
                <td class="actions">
                    <a href="{% url 'report-detail' report.pk %}">جزئیات</a>
                    <a href="{% url 'report-update' report.pk %}">ویرایش</a>
                    <a href="{% url 'report-delete' report.pk %}" class="delete">حذف</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">هیچ گزارشی برای این مورد ثبت نشده است.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}