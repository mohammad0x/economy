{% extends "base.html" %}
{% block title %}لیست محرومین{% endblock %}
{% block content %}
<h2 class="page-title">لیست محرومین</h2>
<a href="{% url 'deprivation-create' %}" class="btn add-btn"><i class="fa-solid fa-user-plus"></i> افزودن محروم</a>

<div class="table-wrapper">
<table class="custom-table">
<thead>
<tr>
<th>نام و نام خانوادگی</th>
<th>کد ملی</th>
<th>شماره تلفن</th>
<th>کد گروه</th>
<th>صندوق مرتبط</th>
<th>عملیات</th>
</tr>
</thead>
<tbody>
{% for d in deprivations %}
<tr>
<td>{{ d.name }}</td>
<td>{{ d.nCode }}</td>
<td>{{ d.phone }}</td>
<td>{{ d.cGroup }}</td>
<td>{{ d.fund_name }}</td>
<td>
<a href="{% url 'deprivation-detail' d.pk %}" class="btn"><i class="fa-solid fa-eye"></i> نمایش</a>
<a href="{% url 'deprivation-update' d.pk %}" class="btn"><i class="fa-solid fa-pen-to-square"></i> ویرایش</a>
<a href="{% url 'deprivation-delete' d.pk %}" class="btn btn-danger"><i class="fa-solid fa-trash"></i> حذف</a>
</td>
</tr>
{% empty %}
<tr><td colspan="6">هیچ فرد محرومی یافت نشد</td></tr>
{% endfor %}
</tbody>
</table>
</div>

<style>
.page-title { color:#1fef8f; margin-bottom:15px; font-size:22px; }
.table-wrapper { overflow-x:auto; margin-top:15px; }
.custom-table { width:100%; border-collapse: collapse; border-radius: 12px; overflow: hidden; }
.custom-table th, .custom-table td { padding:12px 15px; text-align:right; border-bottom:1px solid rgba(255,255,255,0.07);}
.custom-table th { background: rgba(31,239,143,0.1); color: #1fef8f; font-weight: 600;}
.custom-table tr:hover { background: rgba(31,239,143,0.15); transition:0.3s;}
.btn { padding:6px 12px; border-radius:6px; background:#1fef8f; color:#000; font-weight:500; border:none; cursor:pointer; transition:0.3s; margin-right:5px; display:inline-flex; align-items:center; gap:4px; text-decoration:none;}
.btn:hover { background:#12b67c; color:#fff;}
.btn-danger { background:#e74c3c; color:#fff;}
.btn-danger:hover { background:#ff5e4d;}
.add-btn { margin-bottom:12px; display:inline-flex; align-items:center; gap:6px;}
@media(max-width:700px){.custom-table th,.custom-table td{padding:8px 10px;font-size:14px;} .page-title{font-size:18px;} .btn{padding:4px 8px; font-size:13px;}}
</style>

<script>
document.querySelectorAll('.btn-danger').forEach(btn=>{btn.addEventListener('click',function(e){if(!confirm("آیا مطمئن هستید که می‌خواهید حذف کنید؟")) e.preventDefault();});});
</script>
{% endblock %}
